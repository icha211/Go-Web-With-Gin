meta {
  name: Create New Album
  type: http
  seq: 3
}

post {
  url: {{baseUrl}}/albums
  body: json
  auth: none
}

headers {
  Content-Type: application/json
  Accept: application/json
}

body:json {
  {
    "id": "5",
    "title": "Kind of Blue",
    "artist": "Miles Davis",
    "price": 45.99
  }
}

vars:pre-request {
  baseUrl: http://localhost:8082
}

tests {
  test("Status code is 201", function() {
    expect(res.getStatus()).to.equal(201);
  });
  
  test("Response is an object", function() {
    expect(res.getBody()).to.be.an('object');
  });
  
  test("Created album has correct data", function() {
    const album = res.getBody();
    expect(album.id).to.equal("5");
    expect(album.title).to.equal("Kind of Blue");
    expect(album.artist).to.equal("Miles Davis");
    expect(album.price).to.equal(45.99);
  });
  
  test("Album has all required fields", function() {
    const album = res.getBody();
    expect(album).to.have.property('id');
    expect(album).to.have.property('title');
    expect(album).to.have.property('artist');
    expect(album).to.have.property('price');
  });
  
  test("Response content type is JSON", function() {
    expect(res.getHeader('content-type')).to.include('application/json');
  });
}
